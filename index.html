<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Link Repository</title>
  <link rel="stylesheet" href="styles.css">
  
  <style>
    body { font-family: Arial, sans-serif; background: #f9f9f9; margin:0; padding:0; }
    #loadingScreen { display: flex; justify-content:center; align-items:center; height:100vh; font-size:1.5rem; }
    #authBox { display:flex; flex-direction:column; gap:10px; max-width:300px; margin:50px auto; }
    #authBox input { padding:8px; width:100%; }
    #userMenu { display:none; justify-content:space-between; align-items:center; max-width:600px; margin:20px auto; }
    #searchSortBox { display:none; justify-content:space-between; max-width:600px; margin:10px auto; }
    #searchSortBox input, #searchSortBox select { padding:6px; }
    #links { max-width:800px; margin:20px auto; }
    table { width:100%; border-collapse: collapse; }
    th, td { border:1px solid #ddd; padding:8px; }
    th { background:#f1f1f1; }
    button { padding:4px 8px; margin:0 2px; cursor:pointer; }
    .edit-btn { background:#3498db; color:#fff; border:none; border-radius:4px; }
    .delete-btn { background:#e74c3c; color:#fff; border:none; border-radius:4px; }
    #addLinkBtn { display:none; margin:10px auto; padding:8px 16px; background:#27ae60; color:#fff; border:none; border-radius:6px; cursor:pointer; }
    /* Modal Styles */
    .modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); justify-content:center; align-items:center; }
    .modal-content { background:#fff; padding:20px; border-radius:6px; max-width:400px; width:90%; }
    .modal-content input { width:100%; padding:8px; margin:6px 0; }
    .links-table a { color:#3498db; text-decoration:none; }
    .category-section h3 { margin:0; }
  </style>
</head>
<body>
  <div id="loadingScreen">Loading...</div>

  <!-- Auth Box -->
  <div id="authBox">
    <input type="email" id="email" placeholder="Email">
    <input type="password" id="password" placeholder="Password">
    <div>
      <button id="signupBtn">Sign Up</button>
      <button id="loginBtn">Login</button>
    </div>
    <button id="googleBtn">Login with Google</button>
  </div>

  <!-- User Menu -->
  <div id="userMenu">
    <span>Logged in as <strong id="userEmail"></strong></span>
    <div>
      <button id="logoutBtn">Logout</button>
      <button onclick="setView('list')">List View</button>
      <button onclick="setView('category')">Category View</button>
    </div>
  </div>

  <!-- Search & Sort -->
  <div id="searchSortBox">
    <input type="text" id="searchInput" placeholder="Search links...">
    <select id="sortSelect">
      <option value="">Sort By</option>
      <option value="title-asc">Title A-Z</option>
      <option value="title-desc">Title Z-A</option>
      <option value="tags">Tags</option>
    </select>
  </div>

  <!-- Add Link Button -->
  <button id="addLinkBtn">Add Link</button>

  <!-- Links Container -->
  <div id="links"></div>

  <!-- Add/Edit Link Modal -->
  <div class="modal" id="linkModal">
    <div class="modal-content">
      <h3 id="modalTitle">Add Link</h3>
      <form id="linkForm">
        <input type="text" id="title" placeholder="Title" required>
        <input type="url" id="url" placeholder="URL" required>
        <input type="text" id="tags" placeholder="Tags (comma separated)">
        <div style="margin-top:10px; text-align:right;">
          <button type="submit" id="saveBtn">Add</button>
          <button type="button" id="cancelLinkBtn">Cancel</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Delete Confirmation Modal -->
  <div class="modal" id="deleteModal">
    <div class="modal-content">
      <p id="deleteMessage">Are you sure?</p>
      <div style="text-align:right;">
        <button id="confirmDeleteBtn">Yes</button>
        <button id="cancelDeleteBtn">Cancel</button>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/supabase.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="app.js"></script>
</body>
</html>
